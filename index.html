<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Roommate Billing Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 20px auto;
      padding: 0 20px;
      background: #f9f9f9;
      color: #333;
    }
    h1, h2 { text-align: center; }
    .summary-container, .monthly-details {
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    .totals-table, table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ddd;
      text-align: center;
    }
    th { background: #f0f0f0; }
    .total-row { font-weight: bold; background: #f5f5f5; }
    .toggle-btn {
      display: block;
      margin: 0 auto 20px;
      background: #4a7bab;
      color: #fff;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    }
    .toggle-btn:hover { background: #3a6790; }
    select { padding: 5px 8px; font-size: 16px; }
    .note { font-style: italic; text-align: center; color: #666; }
    .last-updated { text-align: right; font-size: 14px; color: #777; }
  </style>
</head>
<body>
  <h1>Roommate Billing Tracker</h1>

  <div class="summary-container">
    <h2>Total Outstanding Balances</h2>
    <table class="totals-table">
      <thead>
        <tr><th>Roommate</th><th>Total Outstanding</th></tr>
      </thead>
      <tbody id="totalSummaryTable"></tbody>
    </table>
    <p class="note">Note: April and May 2025 data need to be updated</p>
  </div>

  <button id="toggleDetails" class="toggle-btn">Show Monthly Breakdown</button>

  <div id="monthlyDetails" class="monthly-details" style="display:none;">
    <div style="text-align:center; margin-bottom:20px;">
      <label for="monthSelector">Select Month:</label>
      <select id="monthSelector">
        <option>Jan 2025</option>
        <option>Feb 2025</option>
        <option>Mar 2025</option>
        <option>Apr 2025</option>
        <option>May 2025</option>
      </select>
    </div>
    <table>
      <thead>
        <tr>
          <th>Roommate</th>
          <th>Electric Owed</th>
          <th>Electric Paid</th>
          <th>Extra Fee</th>
          <th>One-Time</th>
          <th>Outstanding</th>
        </tr>
      </thead>
      <tbody id="billingTableBody"></tbody>
    </table>
  </div>

  <div class="last-updated">Last updated: May 12, 2025</div>

  <script>
    const billingData = {
      "Jan 2025": {
        electricTotal: 0,
        extraFee:      0,
        payments: {
          osa:      { electric: 0,   oneTimeCharge: 466 },
          precious: { electric: 0,   oneTimeCharge: 466 },
          jay:      { electric: 0,   oneTimeCharge:   0 }
        }
      },
      "Feb 2025": {
        electricTotal: 752,
        extraFee:      200,
        payments: {
          osa:      { electric: 0, oneTimeCharge: 0 },
          precious: { electric: 0,    oneTimeCharge: 0 },
          jay:      { electric: 188.17, oneTimeCharge: 0 }
        }
      },
      "Mar 2025": {
        electricTotal: 777.52,
        extraFee:      200,
        payments: {
          osa:      { electric: 0,   oneTimeCharge: 0 },
          precious: { electric: 0,   oneTimeCharge: 0 },
          jay:      { electric: 94.38,oneTimeCharge: 0 }
        }
      },
      "Apr 2025": {
        electricTotal: 0,    // ← put April’s bill here
        extraFee:      200,
        payments: {
          osa:      { electric: 0,    oneTimeCharge: 0 },
          precious: { electric: 0,    oneTimeCharge: 0 },
          jay:      { electric: 72.22, oneTimeCharge: 0 }
        }
      },
      "May 2025": {
        electricTotal: 0,    // ← put May’s bill here
        extraFee:      200,
        payments: {
          osa:      { electric: 0,    oneTimeCharge: 0 },
          precious: { electric: 193.68,oneTimeCharge: 0 },
          jay:      { electric: 193.68,    oneTimeCharge: 0 }
        }
      }
    };

    const roommates = ["osa","precious","jay"];

    function calcMonth(monthKey) {
      const m = billingData[monthKey];
      const share = m.electricTotal / 3;
      const out = {};
      roommates.forEach(r => {
        const p = m.payments[r];
        const extra = (r==="jay")?0:m.extraFee;
        const owed = share + extra;
        const paid = p.electric;
        const oneT = p.oneTimeCharge;
        out[r] = {
          electricOwed:      share,
          electricPaid:      paid,
          pymntPlanExtraOwed: extra,
          oneTimeCharge:     oneT,
          outstanding:       Math.max(0, owed - paid + oneT)
        };
      });
      return out;
    }

    function calcTotals() {
      const totals = { osa:0, precious:0, jay:0 };
      Object.keys(billingData).forEach(m => {
        const month = billingData[m];
        if (m==="Jan 2025") {
          roommates.forEach(r => {
            totals[r] += month.payments[r].oneTimeCharge;
          });
        } else {
          if (month.electricTotal===0) return;
          const share = month.electricTotal/3;
          roommates.forEach(r => {
            const extra = (r==="jay")?0:month.extraFee;
            const paid = month.payments[r].electric;
            const oneT = month.payments[r].oneTimeCharge;
            totals[r] += Math.max(0, share + extra - paid + oneT);
          });
        }
      });
      return totals;
    }

    function renderSummary() {
      const t = calcTotals();
      const tbody = document.getElementById("totalSummaryTable");
      tbody.innerHTML = "";
      let grand = 0;
      Object.entries(t).forEach(([r,val])=>{
        grand += val;
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${r.charAt(0).toUpperCase()+r.slice(1)}</td><td>$${val.toFixed(2)}</td>`;
        tbody.appendChild(tr);
      });
      const tr = document.createElement("tr");
      tr.className="total-row";
      tr.innerHTML = `<td>Grand Total</td><td>$${grand.toFixed(2)}</td>`;
      tbody.appendChild(tr);
    }

    function renderMonth() {
      const monthKey = document.getElementById("monthSelector").value;
      const data = calcMonth(monthKey);
      const tbody = document.getElementById("billingTableBody");
      tbody.innerHTML = "";
      let tot=0;
      Object.entries(data).forEach(([r,o])=>{
        tot += o.outstanding;
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${r.charAt(0).toUpperCase()+r.slice(1)}</td>
          <td>${o.electricOwed.toFixed(2)}</td>
          <td>${o.electricPaid.toFixed(2)}</td>
          <td>${o.pymntPlanExtraOwed.toFixed(2)}</td>
          <td>${o.oneTimeCharge.toFixed(2)}</td>
          <td>${o.outstanding.toFixed(2)}</td>
        `;
        tbody.appendChild(tr);
      });
      const tr = document.createElement("tr");
      tr.className="total-row";
      tr.innerHTML = `<td>Total</td><td colspan="4"></td><td>${tot.toFixed(2)}</td>`;
      tbody.appendChild(tr);
    }

    document.getElementById("toggleDetails").onclick = () => {
      const d = document.getElementById("monthlyDetails");
      const btn = document.getElementById("toggleDetails");
      if (d.style.display==="none") {
        d.style.display="block";
        btn.textContent="Hide Monthly Breakdown";
      } else {
        d.style.display="none";
        btn.textContent="Show Monthly Breakdown";
      }
    };

    document.getElementById("monthSelector").onchange = renderMonth;

    window.addEventListener("DOMContentLoaded", ()=>{
      renderSummary();
      renderMonth();
    });
  </script>
</body>
</html>
